

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: map.js | CodeSnippet</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 150px; height: 13px">
        
            <a href="https://github.com/nhn/tui.jsdoc-template" rel="noopener noreferrer" target="_blank">
                <img src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">CodeSnippet</a></h1>
        
            <span class="version">v1.5.2</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="tui.util.CustomEvents.html">CustomEvents</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tui.util.CustomEvents_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="tui.util.CustomEvents.html#contexts">contexts</a></li><li><a href="tui.util.CustomEvents.html#events">events</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="tui.util.CustomEvents.html#.mixin">mixin</a></li><li><a href="tui.util.CustomEvents.html#fire">fire</a></li><li><a href="tui.util.CustomEvents.html#getListenerLength">getListenerLength</a></li><li><a href="tui.util.CustomEvents.html#hasListener">hasListener</a></li><li><a href="tui.util.CustomEvents.html#invoke">invoke</a></li><li><a href="tui.util.CustomEvents.html#off">off</a></li><li><a href="tui.util.CustomEvents.html#on">on</a></li><li><a href="tui.util.CustomEvents.html#once">once</a></li></ul></div></li><li><a href="tui.util.Enum.html">Enum</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tui.util.Enum_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="tui.util.Enum.html#getName">getName</a></li><li><a href="tui.util.Enum.html#set">set</a></li></ul></div></li><li><a href="tui.util.ExMap.html">ExMap</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tui.util.ExMap_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="tui.util.ExMap.html#deleteByKeys">deleteByKeys</a></li><li><a href="tui.util.ExMap.html#filter">filter</a></li><li><a href="tui.util.ExMap.html#merge">merge</a></li><li><a href="tui.util.ExMap.html#setObject">setObject</a></li></ul></div></li><li><a href="tui.util.HashMap.html">HashMap</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tui.util.HashMap_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="tui.util.HashMap.html#length">length</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="tui.util.HashMap.html#each">each</a></li><li><a href="tui.util.HashMap.html#find">find</a></li><li><a href="tui.util.HashMap.html#get">get</a></li><li><a href="tui.util.HashMap.html#has">has</a></li><li><a href="tui.util.HashMap.html#keys">keys</a></li><li><a href="tui.util.HashMap.html#merge">merge</a></li><li><a href="tui.util.HashMap.html#remove">remove</a></li><li><a href="tui.util.HashMap.html#removeAll">removeAll</a></li><li><a href="tui.util.HashMap.html#removeByKey">removeByKey</a></li><li><a href="tui.util.HashMap.html#removeByKeyArray">removeByKeyArray</a></li><li><a href="tui.util.HashMap.html#set">set</a></li><li><a href="tui.util.HashMap.html#setKeyValue">setKeyValue</a></li><li><a href="tui.util.HashMap.html#setObject">setObject</a></li><li><a href="tui.util.HashMap.html#toArray">toArray</a></li></ul></div></li><li><a href="tui.util.Map.html">Map</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tui.util.Map_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="tui.util.Map.html#clear">clear</a></li><li><a href="tui.util.Map.html#delete">delete</a></li><li><a href="tui.util.Map.html#entries">entries</a></li><li><a href="tui.util.Map.html#forEach">forEach</a></li><li><a href="tui.util.Map.html#get">get</a></li><li><a href="tui.util.Map.html#has">has</a></li><li><a href="tui.util.Map.html#keys">keys</a></li><li><a href="tui.util.Map.html#set">set</a></li><li><a href="tui.util.Map.html#values">values</a></li></ul></div></li><li><a href="tui.util.Popup.html">Popup</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tui.util.Popup_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="tui.util.Popup.html#closeWithParentPopup">closeWithParentPopup</a></li><li><a href="tui.util.Popup.html#openedPopup">openedPopup</a></li><li><a href="tui.util.Popup.html#postBridgeUrl">postBridgeUrl</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="tui.util.Popup.html#close">close</a></li><li><a href="tui.util.Popup.html#closeAllPopup">closeAllPopup</a></li><li><a href="tui.util.Popup.html#createForm">createForm</a></li><li><a href="tui.util.Popup.html#focus">focus</a></li><li><a href="tui.util.Popup.html#getPopupList">getPopupList</a></li><li><a href="tui.util.Popup.html#openPopup">openPopup</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="tui.util.html">tui.util</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="tui.util_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="tui.util.html#.browser">browser</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="tui.util.html#.bind">bind</a></li><li><a href="tui.util.html#.compareJSON">compareJSON</a></li><li><a href="tui.util.html#.createObject">createObject</a></li><li><a href="tui.util.html#.debounce">debounce</a></li><li><a href="tui.util.html#.decodeHTMLEntity">decodeHTMLEntity</a></li><li><a href="tui.util.html#.defineClass">defineClass</a></li><li><a href="tui.util.html#.defineModule">defineModule</a></li><li><a href="tui.util.html#.defineNamespace">defineNamespace</a></li><li><a href="tui.util.html#.encodeHTMLEntity">encodeHTMLEntity</a></li><li><a href="tui.util.html#.extend">extend</a></li><li><a href="tui.util.html#.filter">filter</a></li><li><a href="tui.util.html#.forEach">forEach</a></li><li><a href="tui.util.html#.forEachArray">forEachArray</a></li><li><a href="tui.util.html#.forEachOwnProperties">forEachOwnProperties</a></li><li><a href="tui.util.html#.formatDate">formatDate</a></li><li><a href="tui.util.html#.hasEncodableString">hasEncodableString</a></li><li><a href="tui.util.html#.hasStamp">hasStamp</a></li><li><a href="tui.util.html#.imagePing">imagePing</a></li><li><a href="tui.util.html#.inArray">inArray</a></li><li><a href="tui.util.html#.inherit">inherit</a></li><li><a href="tui.util.html#.isArguments">isArguments</a></li><li><a href="tui.util.html#.isArray">isArray</a></li><li><a href="tui.util.html#.isArraySafe">isArraySafe</a></li><li><a href="tui.util.html#.isBoolean">isBoolean</a></li><li><a href="tui.util.html#.isBooleanSafe">isBooleanSafe</a></li><li><a href="tui.util.html#.isDate">isDate</a></li><li><a href="tui.util.html#.isDateSafe">isDateSafe</a></li><li><a href="tui.util.html#.isEmpty">isEmpty</a></li><li><a href="tui.util.html#.isExisty">isExisty</a></li><li><a href="tui.util.html#.isFalsy">isFalsy</a></li><li><a href="tui.util.html#.isFunction">isFunction</a></li><li><a href="tui.util.html#.isFunctionSafe">isFunctionSafe</a></li><li><a href="tui.util.html#.isHTMLNode">isHTMLNode</a></li><li><a href="tui.util.html#.isHTMLTag">isHTMLTag</a></li><li><a href="tui.util.html#.isNotEmpty">isNotEmpty</a></li><li><a href="tui.util.html#.isNull">isNull</a></li><li><a href="tui.util.html#.isNumber">isNumber</a></li><li><a href="tui.util.html#.isNumberSafe">isNumberSafe</a></li><li><a href="tui.util.html#.isObject">isObject</a></li><li><a href="tui.util.html#.isString">isString</a></li><li><a href="tui.util.html#.isStringSafe">isStringSafe</a></li><li><a href="tui.util.html#.isTruthy">isTruthy</a></li><li><a href="tui.util.html#.isUndefined">isUndefined</a></li><li><a href="tui.util.html#.keys">keys</a></li><li><a href="tui.util.html#.map">map</a></li><li><a href="tui.util.html#.pick">pick</a></li><li><a href="tui.util.html#.pluck">pluck</a></li><li><a href="tui.util.html#.range">range</a></li><li><a href="tui.util.html#.reduce">reduce</a></li><li><a href="tui.util.html#.stamp">stamp</a></li><li><a href="tui.util.html#.throttle">throttle</a></li><li><a href="tui.util.html#.timestamp">timestamp</a></li><li><a href="tui.util.html#.toArray">toArray</a></li><li><a href="tui.util.html#.zip">zip</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * @fileoverview
 *  Implements the Map object.
 * @author NHN.
 *         FE Development Lab &lt;dl_javascript@nhn.com>
 */

'use strict';

var collection = require('./collection');
var type = require('./type');
var array = require('./array');
var browser = require('./browser');
var func = require('./func');

/**
 * Using undefined for a key can be ambiguous if there's deleted item in the array,&lt;br>
 * which is also undefined when accessed by index.&lt;br>
 * So use this unique object as an undefined key to distinguish it from deleted keys.
 * @private
 * @constant
 */
var _KEY_FOR_UNDEFINED = {};

/**
 * For using NaN as a key, use this unique object as a NaN key.&lt;br>
 * This makes it easier and faster to compare an object with each keys in the array&lt;br>
 * through no exceptional comapring for NaN.
 * @private
 * @constant
 */
var _KEY_FOR_NAN = {};

/**
 * Constructor of MapIterator&lt;br>
 * Creates iterator object with new keyword.
 * @constructor
 * @param  {Array} keys - The array of keys in the map
 * @param  {function} valueGetter - Function that returns certain value,
 *      taking key and keyIndex as arguments.
 * @ignore
 */
function MapIterator(keys, valueGetter) {
    this._keys = keys;
    this._valueGetter = valueGetter;
    this._length = this._keys.length;
    this._index = -1;
    this._done = false;
}

/**
 * Implementation of Iterator protocol.
 * @returns {{done: boolean, value: *}} Object that contains done(boolean) and value.
 */
MapIterator.prototype.next = function() {
    var data = {};
    do {
        this._index += 1;
    } while (type.isUndefined(this._keys[this._index]) &amp;&amp; this._index &lt; this._length);

    if (this._index >= this._length) {
        data.done = true;
    } else {
        data.done = false;
        data.value = this._valueGetter(this._keys[this._index], this._index);
    }

    return data;
};

/**
 * The Map object implements the ES6 Map specification as closely as possible.&lt;br>
 * For using objects and primitive values as keys, this object uses array internally.&lt;br>
 * So if the key is not a string, get(), set(), has(), delete() will operates in O(n),&lt;br>
 * and it can cause performance issues with a large dataset.
 *
 * Features listed below are not supported. (can't be implented without native support)
 * - Map object is iterable&lt;br>
 * - Iterable object can be used as an argument of constructor
 *
 * If the browser supports full implementation of ES6 Map specification, native Map obejct
 * will be used internally.
 * @class
 * @param  {Array} initData - Array of key-value pairs (2-element Arrays).
 *      Each key-value pair will be added to the new Map
 * @memberof tui.util
 * @example
 * // node, commonjs
 * var Map = require('tui-code-snippet').Map;
 * @example
 * // distribution file, script
 * &lt;script src='path-to/tui-code-snippt.js'>&lt;/script>
 * &lt;script>
 * var Map = tui.util.Map;
 * &lt;script>
 */
function Map(initData) {
    this._valuesForString = {};
    this._valuesForIndex = {};
    this._keys = [];

    if (initData) {
        this._setInitData(initData);
    }

    this.size = 0;
}

/* eslint-disable no-extend-native */
/**
 * Add all elements in the initData to the Map object.
 * @private
 * @param  {Array} initData - Array of key-value pairs to add to the Map object
 */
Map.prototype._setInitData = function(initData) {
    if (!type.isArray(initData)) {
        throw new Error('Only Array is supported.');
    }
    collection.forEachArray(initData, function(pair) {
        this.set(pair[0], pair[1]);
    }, this);
};

/**
 * Returns true if the specified value is NaN.&lt;br>
 * For unsing NaN as a key, use this method to test equality of NaN&lt;br>
 * because === operator doesn't work for NaN.
 * @private
 * @param {*} value - Any object to be tested
 * @returns {boolean} True if value is NaN, false otherwise.
 */
Map.prototype._isNaN = function(value) {
    return typeof value === 'number' &amp;&amp; value !== value; // eslint-disable-line no-self-compare
};

/**
 * Returns the index of the specified key.
 * @private
 * @param  {*} key - The key object to search for.
 * @returns {number} The index of the specified key
 */
Map.prototype._getKeyIndex = function(key) {
    var result = -1;
    var value;

    if (type.isString(key)) {
        value = this._valuesForString[key];
        if (value) {
            result = value.keyIndex;
        }
    } else {
        result = array.inArray(key, this._keys);
    }

    return result;
};

/**
 * Returns the original key of the specified key.
 * @private
 * @param  {*} key - key
 * @returns {*} Original key
 */
Map.prototype._getOriginKey = function(key) {
    var originKey = key;
    if (key === _KEY_FOR_UNDEFINED) {
        originKey = undefined; // eslint-disable-line no-undefined
    } else if (key === _KEY_FOR_NAN) {
        originKey = NaN;
    }

    return originKey;
};

/**
 * Returns the unique key of the specified key.
 * @private
 * @param  {*} key - key
 * @returns {*} Unique key
 */
Map.prototype._getUniqueKey = function(key) {
    var uniqueKey = key;
    if (type.isUndefined(key)) {
        uniqueKey = _KEY_FOR_UNDEFINED;
    } else if (this._isNaN(key)) {
        uniqueKey = _KEY_FOR_NAN;
    }

    return uniqueKey;
};

/**
 * Returns the value object of the specified key.
 * @private
 * @param  {*} key - The key of the value object to be returned
 * @param  {number} keyIndex - The index of the key
 * @returns {{keyIndex: number, origin: *}} Value object
 */
Map.prototype._getValueObject = function(key, keyIndex) { // eslint-disable-line consistent-return
    if (type.isString(key)) {
        return this._valuesForString[key];
    }

    if (type.isUndefined(keyIndex)) {
        keyIndex = this._getKeyIndex(key);
    }
    if (keyIndex >= 0) {
        return this._valuesForIndex[keyIndex];
    }
};

/**
 * Returns the original value of the specified key.
 * @private
 * @param  {*} key - The key of the value object to be returned
 * @param  {number} keyIndex - The index of the key
 * @returns {*} Original value
 */
Map.prototype._getOriginValue = function(key, keyIndex) {
    return this._getValueObject(key, keyIndex).origin;
};

/**
 * Returns key-value pair of the specified key.
 * @private
 * @param  {*} key - The key of the value object to be returned
 * @param  {number} keyIndex - The index of the key
 * @returns {Array} Key-value Pair
 */
Map.prototype._getKeyValuePair = function(key, keyIndex) {
    return [this._getOriginKey(key), this._getOriginValue(key, keyIndex)];
};

/**
 * Creates the wrapper object of original value that contains a key index
 * and returns it.
 * @private
 * @param  {type} origin - Original value
 * @param  {type} keyIndex - Index of the key
 * @returns {{keyIndex: number, origin: *}} Value object
 */
Map.prototype._createValueObject = function(origin, keyIndex) {
    return {
        keyIndex: keyIndex,
        origin: origin
    };
};

/**
 * Sets the value for the key in the Map object.
 * @param  {*} key - The key of the element to add to the Map object
 * @param  {*} value - The value of the element to add to the Map object
 * @returns {Map} The Map object
 */
Map.prototype.set = function(key, value) {
    var uniqueKey = this._getUniqueKey(key);
    var keyIndex = this._getKeyIndex(uniqueKey);
    var valueObject;

    if (keyIndex &lt; 0) {
        keyIndex = this._keys.push(uniqueKey) - 1;
        this.size += 1;
    }
    valueObject = this._createValueObject(value, keyIndex);

    if (type.isString(key)) {
        this._valuesForString[key] = valueObject;
    } else {
        this._valuesForIndex[keyIndex] = valueObject;
    }

    return this;
};

/**
 * Returns the value associated to the key, or undefined if there is none.
 * @param  {*} key - The key of the element to return
 * @returns {*} Element associated with the specified key
 */
Map.prototype.get = function(key) {
    var uniqueKey = this._getUniqueKey(key);
    var value = this._getValueObject(uniqueKey);

    return value &amp;&amp; value.origin;
};

/**
 * Returns a new Iterator object that contains the keys for each element
 * in the Map object in insertion order.
 * @returns {Iterator} A new Iterator object
 */
Map.prototype.keys = function() {
    return new MapIterator(this._keys, func.bind(this._getOriginKey, this));
};

/**
 * Returns a new Iterator object that contains the values for each element
 * in the Map object in insertion order.
 * @returns {Iterator} A new Iterator object
 */
Map.prototype.values = function() {
    return new MapIterator(this._keys, func.bind(this._getOriginValue, this));
};

/**
 * Returns a new Iterator object that contains the [key, value] pairs
 * for each element in the Map object in insertion order.
 * @returns {Iterator} A new Iterator object
 */
Map.prototype.entries = function() {
    return new MapIterator(this._keys, func.bind(this._getKeyValuePair, this));
};

/**
 * Returns a boolean asserting whether a value has been associated to the key
 * in the Map object or not.
 * @param  {*} key - The key of the element to test for presence
 * @returns {boolean} True if an element with the specified key exists;
 *          Otherwise false
 */
Map.prototype.has = function(key) {
    return !!this._getValueObject(key);
};

/**
 * Removes the specified element from a Map object.
 * @param {*} key - The key of the element to remove
 * @function delete
 * @memberof tui.util.Map.prototype
 */
// cannot use reserved keyword as a property name in IE8 and under.
Map.prototype['delete'] = function(key) {
    var keyIndex;

    if (type.isString(key)) {
        if (this._valuesForString[key]) {
            keyIndex = this._valuesForString[key].keyIndex;
            delete this._valuesForString[key];
        }
    } else {
        keyIndex = this._getKeyIndex(key);
        if (keyIndex >= 0) {
            delete this._valuesForIndex[keyIndex];
        }
    }

    if (keyIndex >= 0) {
        delete this._keys[keyIndex];
        this.size -= 1;
    }
};

/**
 * Executes a provided function once per each key/value pair in the Map object,
 * in insertion order.
 * @param  {function} callback - Function to execute for each element
 * @param  {thisArg} thisArg - Value to use as this when executing callback
 */
Map.prototype.forEach = function(callback, thisArg) {
    thisArg = thisArg || this;
    collection.forEachArray(this._keys, function(key) {
        if (!type.isUndefined(key)) {
            callback.call(thisArg, this._getValueObject(key).origin, key, this);
        }
    }, this);
};

/**
 * Removes all elements from a Map object.
 */
Map.prototype.clear = function() {
    Map.call(this);
};
/* eslint-enable no-extend-native */

// Use native Map object if exists.
// But only latest versions of Chrome and Firefox support full implementation.
(function() {
    if (window.Map &amp;&amp; (
        (browser.firefox &amp;&amp; browser.version >= 37) ||
            (browser.chrome &amp;&amp; browser.version >= 42)
    )
    ) {
        Map = window.Map; // eslint-disable-line no-func-assign
    }
})();

module.exports = Map;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://cloud.githubusercontent.com/assets/12269563/20029815/01133928-a39a-11e6-80f3-12500a91c755.png" style="width: 150px; height: 13px">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
